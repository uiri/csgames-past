// Generated by CoffeeScript 1.10.0
(function() {
  var addAttack, init, updateAttacks;

  $(function() {
    return init();
  });

  init = function() {
    return setInterval(updateAttacks, 1000);
  };

  updateAttacks = function() {
    return $.get("/update_monitor", function(data) {
      $('#attackContainer').empty();
      return $.each(data.attacks, function(idx, att) {
        return addAttack(att);
      });
    });
  };

  addAttack = function(att) {
    var attText, attWell, attackerColor, attackerName, receiverColor, receiverName, wellData;
    attWell = $("<div></div>").addClass('well');
    wellData = $("<span></span>");
    attWell.append(wellData);
    $('#attackContainer').prepend(attWell);
    attackerColor = window.teams[att.attacker % window.teams.length].color;
    attackerName = $("<span></span>").css("color", attackerColor).css("font-weight", "bold").text(att.attacker_name);
    wellData.append(attackerName);
    if (att["distributed"] === true) {
      attWell.addClass("well-sm");
      attText = " is " + att.name + "'ing ";
      wellData.append($(document.createTextNode(attText)));
      receiverColor = window.teams[att.receiver % window.teams.length].color;
      receiverName = $("<span></span>").css("color", receiverColor).css("font-weight", "bold").text(att.receiver_name);
      return wellData.append(receiverName);
    } else {
      attWell.addClass("well-lg");
      attText = " is " + att.name + "'ing ";
      wellData.append($(document.createTextNode(attText)));
      receiverColor = window.teams[att.receiver % window.teams.length].color;
      receiverName = $("<span></span>").css("color", receiverColor).css("font-weight", "bold").text(att.receiver_name);
      return wellData.append(receiverName);
    }
  };

}).call(this);
